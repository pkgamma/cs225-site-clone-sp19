<!DOCTYPE html>
<html lang="en">


<!-- Mirrored from courses.engr.illinois.edu/cs225/sp2019/notes/btrees/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 09 May 2019 18:18:42 GMT -->
<head>
    <meta charset="UTF-8">
    <title>CS 225 | B-Trees</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="base_url" content="/cs225/sp2019">

    <link rel="apple-touch-icon" sizes="57x57" href="../../static/img/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="../../static/img/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="../../static/img/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="../../static/img/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="../../static/img/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="../../static/img/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="../../static/img/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="../../static/img/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="../../static/img/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="../../static/img/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="../../static/img/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/img/favicon-16x16.png">
<link rel="manifest" href="../../static/img/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="../../static/img/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css">

<link rel="stylesheet" href="../../static/css/main.css">
<link rel="stylesheet" href="../../static/css/github-highlighting.css">

<script src="https://code.jquery.com/jquery-3.4.0.min.js" integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script>
<script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            TeX: {
                extensions: [ "AMSmath.js", "AMSsymbols.js" ]
            },
            tex2jax: {
                inlineMath: [['\\(','\\)'], ['$$','$$']],
                displayMath: [['\\[','\\]']]
            },
        });
</script>

<style>
    svg.graph {
        overflow: visible;
        margin-left: auto;
        margin-right: auto;
        margin-bottom: 10px;
        display: block;
        max-width: 95%;
    }
</style>

<style>
  /* Main items  */
  .main-item {
    border-top-left-radius: calc(1rem - 1px);
    border-top-right-radius: calc(1rem - 1px);
    border-bottom-left-radius: calc(1rem - 1px);
    border-bottom-right-radius: calc(1rem - 1px);
    background-size: cover;
    padding: 10px
  }

  .main-item-mp {
    background-image: url('../../assets/covers/default_mp.svg')
  }

  .main-item-lab {
    background-image: url('../../assets/covers/default_lab.svg')
  }

  .main-item-note {
    background-image: url('../../assets/covers/notes.svg')
  }

  .main-item-body {
    width: 320px;
    height: 180px;
    padding: 20px;

    display: flex;
    border: none !important;
    flex-direction: column;
    justify-content: center;
    background-color: rgba(255, 255, 255, 0.91) !important;
  }

  .main-item-body:hover {
    background-color: rgba(255, 255, 255, 0) !important;
    background: transparent;
    border: transparent;
  }

  .main-item-body:hover * {
    -webkit-text-fill-color: white !important;
    -webkit-background-clip: none !important;
  }

  .main-item-text {
    -webkit-text-fill-color: transparent;
    -webkit-background-clip: text;
    background-size: cover;
  }

  .main-item-text-mp {
    background-image: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('../../assets/covers/default_mp.svg')
  }

  .main-item-text-lab {
    background-image: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('../../assets/covers/default_lab.svg')
  }

  .main-item-text-note {
    background-image: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('../../assets/covers/notes.svg')
  }
</style>

</head>
<body class="mb-3">
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <a class="navbar-brand mr-0 mr-md-2" href="../../index.html">
        <img src="../../static/img/UIUC_logo.png" alt="UIUC Logo" width="24" height="32" class="d-inline-block align-top mr-2">
        CS 225
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item ">
                <a class="nav-link" href="../../pages/lectures.html">Lectures</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../../assignments/index.html">Assignments</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../../exams/index.html">Exams</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../index.html">Notes</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../../pages/resources.html">Resources</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="../../pages/course_info.html">Course Info</a>
            </li>
        </ul>
    </div>
</nav>

<article class="container py-4">
    <a href="../index.html">Back to Notes</a>
    <header class="mb-4">
        <h1 class="text-dark">B-Trees</h1>
        <span class="text-secondary">by Adrian Clark</span>
    </header>
    <h2 id="definition">Definition</h2>

<p>A <em>B-Tree</em> is a self balancing <a href="../bst/index.html">Binary Search Tree(BST)</a>. In this type of tree where each node can potentially have more than 2 children. Each node tends to hold 2 containers, in this case lets say 2 arrays, where one array holds the keys of the node and the other points to the children of the node.</p>

<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/btreeExample.png" class="img-fluid" />
  </div>
</div>

<h2 id="b-tree-properties">B-tree Properties</h2>

<p>Here are some things to keep in mind about the properties of B-tree:</p>
<ol>
  <li>M denotes the max number of child nodes a node can point to</li>
  <li>The max number of keys per node is M-1</li>
  <li>The root node is either a leaf node or an internal node with 2 to M children and 1 to M-1 Keys</li>
  <li>The rest of the internal nodes have between M/2 and M children</li>
  <li>All leaves are at the same depth, which makes the tree Balanced</li>
</ol>

<h2 id="find">Find</h2>
<p>The process of Finding a certain key is very similar to Searhcing in a BST, especially since B-trees are a type of BST. This is also another case where recursive traversal is preferred. For the Steps below, note that <code>i</code> represents the index of the key you are currently on.&lt;/br&gt;&lt;/br&gt;
Steps:</p>
<ol>
  <li>Go through each index of the current node’s array of keys</li>
  <li>If the key is in this node’s array of keys, return the key</li>
  <li>If the key is not in this node you have two options.&lt;/br&gt;One: Find the next biggest key and go to the ith child of that node, also known as the left child of the current key.&lt;/br&gt;Two: Find the next smallest key and go the (ith + 1) child, also known as the right child of the current key. I say you have two options, as there is a potential for the key you are searching for to be less than the first key or greater than the last key of a Node.</li>
  <li>If you get to the leaf node where the data value should be and don’t see it in the array of keys then this value is not in the tree.</li>
</ol>

<p>In this one we can see that we start in the root and follow the path of blue arrows and boxes to find the correct value. Even though it’s not shown in this picture,remember to go through the array of keys for the nodes you go through</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/FindInBTree.png" class="img-fluid" />
  </div>
</div>

<h2 id="insertion">Insertion</h2>
<p>The process of inserting requires you navigate down to a leaf node by searching for a valid spot to insert the data. When you reach the bottom you will attempt to add the data. I say attempt, because if there is an open space in that node for the data it will be quick and simple. But this is not always the case, sometimes nodes are full and you will have to Split nodes.</p>

<p>Let’s say we want to Insert the key of 1337. Then we first have to find the correct node, and see if there is space for the Insertion of the data.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/SimpleAddBTree.png" class="img-fluid" />
  </div>
</div>

<p>Luckily for us this is a very simple case and we can just directly insert the key into the node. This will not always be the case because we might have to Split a node, or shuffle the arrays of the node around to make sure they are in the correct order.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/SuccessfulAddToBTree.png" class="img-fluid" />
  </div>
</div>

<h2 id="splitting-nodes">Splitting Nodes</h2>
<p>Splitting nodes usually takes place after the insertion of a key. &lt;/br&gt;&lt;/br&gt;
Steps:</p>
<ol>
  <li>When you try to insert into node, N1, you notice that the amount of keys is now greater than M-1.</li>
  <li>Now You must take the middle key and put it in the parent node’s keys</li>
  <li>Now all keys that were in the array of N1 that are greater than the thrown up key are put into a node that is the (i + 1), where i is the index of the thrown up key, child of the parent node. The rest are put into the Node that is the ith child of the parent tree. If a Node does not exist for that child but is a valid child to place ,Since there is space in the parent, you can create the child Node and populate it.</li>
</ol>

<p>So let’s say we try to add the value 88 to a tree.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/TryingToAddToFullBTree.png" class="img-fluid" />
  </div>
</div>
<p>Uh-Oh that node is Full, So Now we have to throw the value of 86 up to the parent Node since it is the middle value, between the values of 56 and 88. Since that was the middle value thrown up and 88 is greater than 86, we put 88 into the (i+1) child node which was initially empty, where i is the index of 86 in the parent node.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/SplitAndAddedToFullBTree.png" class="img-fluid" />
  </div>
</div>
<p>This is another case where we were lucky our operations were simple because you could run into the problem that the parent node is also full, requiring you to do more operations.</p>

<h2 id="removaldeletion">Removal/Deletion</h2>
<p><em>Removal/Deletion of a data point is not done in Lab B-Tree</em></p>

<p>Removing is very similar to Inserting: you navigate down to the leaf node by searching and when you reach the key you have to delete the data. After you have deleted the data though, you have to make sure the tree still holds its BST property and the B-tree properties. Did that removal remove an important key in a Node? Did that removal make a Node fall below M/2 children? These are just examples of potential scenarios that come out of deletion, and this is where the idea of combining nodes comes in.</p>

<p>Let’s say we want to Remove the Data Value of 88. Then we first have to find the Node, if it exists, and remove it.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/SimpleDeleteBTree.png" class="img-fluid" />
  </div>
</div>

<p>Once we’ve deleted that data point, You might notice that there is a gap in our array, which we don’t want. In order to combat this, we can move the data value 1337 into the spot previously held by 88.</p>
<div class="row">
  <div class="col col-xs-12 col-md-6 offset-md-3">
    <img src="../../assets/notes/btree/SimpleDeleteSuccessfulBTree.png" class="img-fluid" />
  </div>
</div>

<p>Luckily this Deletion didn’t make us have to combine any Nodes so it was a simple process this time. Deletion can be more complicated and you can visit <a href="https://medium.com/@vijinimallawaarachchi/all-you-need-to-know-about-deleting-keys-from-b-trees-9090f3334b5c">here</a> or take CS411 - Database Systems to learn more about Deletion because there are also different Merging scenarios that result from Deletion.</p>

<h2 id="merging-nodes">Merging Nodes</h2>
<p><em>The Merging of Nodes of is not done in Lab B-Tree</em></p>

<p>Combining nodes usually takes place after the deletion of a key. For example, maybe after you removed the data, a node has less than M/2 children, then you must combine certain nodes.</p>

<p>The Merging of nodes is not as simple as Splitting due to the fact that you have to deal with more semantics of the tree. As you could be moving around multiple keys, and not just throwing them up to Parent Nodes but also throwing them down to various children nodes as well.</p>

<p>If you wish to learn more I encourage you to Google it or check out the link in the “Removal/Deletion” section of this page</p>

<h2 id="runtime">Runtime</h2>
<p>Search:<br /> <code>O(logn)</code> 
    Since this is a BST and our search algorithm will have us checking each node for the value and if its not there we go to the correct child node, our run time is <code>O(log(n))</code>. Or more formally we can say the runtime is equal to <code>O(depth*logM)</code> where depth is equal to log(n), which, since N » m we can say is just O(log(n)) in the end.</p>

<p>Combining/Splitting of Keys:<br /><code>O(M)</code> Since each Node can have up to M keys and we have to find the correct key to split/combine upon.</p>

<p>Insert/Delete: <br /><code>O((M/log M)*logN)</code> Since we have to first go to the leaf node and find where to put the Node and now have to update the tree, by splitting and combining keys, in order to maintain the tree.</p>

</article>

</body>

<!-- Mirrored from courses.engr.illinois.edu/cs225/sp2019/notes/btrees/ by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 09 May 2019 18:18:50 GMT -->
</html>
